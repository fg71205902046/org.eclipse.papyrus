# Papyrus JavaFX to SWT Service

This project provides an implementation for the FXWrapperService, which integrates JavaFX Controls in SWT. The current implementation is based on GEF's FXCanvasEx.

As building Eclipse plug-ins based on FXCanvas is not trivial, this project has been separated from the rest of the Papyrus build, to keep this complexity in one place.

## Building

In this folder, run `mvn clean verify`

The build includes 2 plug-ins (One to declare the service, the other to implement it), 1 feature and 1 P2 Update site. The build is not integrated with Papyrus, so it uses a much simpler target platform, and should take less than a minute to complete.

A third plug-in is also built, which provides an Eclipse View using the JavaFX integration, for debug/testing purposes. This plug-in is *not* included in the feature or P2 site.

## Installing

Use the P2 Update Site generated by the Maven build to install the feature (Which contains the Service and its Implementation). You will also need to install the following features, to get JavaFX in Eclipse:

From `https://downloads.efxclipse.bestsolution.at/p2-repos/openjfx-11/repository/`, uncheck "Group items by category" and install:
* openjfx.standard.feature
*	openjfx.swt.feature
*	openjfx.swing.feature

*Note*: this step is only required for end-users installing the product. For developers, see the next section below. Moreover, Products based on JavaFX should ensure to include these JavaFX Features in their dependencies or product, to make them transparent to the user).

## Configuring the IDE for developers

These steps only apply to plug-in developers that need to include JavaFX.

To develop with JavaFX in Eclipse, you need to install the E(fx)clipse IDE. From `https://download.eclipse.org/efxclipse/updates-released/3.7.0/site/`, install `e(fx)clipse - IDE`

You also need to download the correct version of JavaFX (JavaFX 11 from openjfx). See https://openjfx.io/ and https://gluonhq.com/products/javafx/

Then, go to your Eclipse Preferences, and in the `JavaFX` section, specify the path to the JavaFX lib/ folder. For example, `JavaFX 11+ SDK: /home/.../openjfx-11.0.2_linux-x64_bin-sdk/javafx-sdk-11.0.2/lib`

Finally, restart Eclipse. Plug-ins can now use and compile JavaFX in Eclipse. One last step is required to start a development runtime. In your Eclipse launch configuration, add `-Dosgi.framework.extensions=org.eclipse.fx.osgi` in the VM Arguments section.

## Testing the runtime

In your runtime Eclipse Application, you can verify that JavaFX is properly running by opening the "JavaFX Test View" provided by the org.eclipse.papyrus.javafx.eclipse.dev plug-in (This plug-in is not part of the installed feature, so you need to import the source plug-in from this repository). It is a simple view that displays a JavaFX Label in an SWT View. If the label shows up, everything is working!



